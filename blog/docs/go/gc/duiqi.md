---
title: "Go 语言中的内存对齐了解吗？"
date: 2022-04-14T10:20:12+08:00
---

* CPU 访问内存时，并不是逐个字节访问，而是以字长（word size）为单位访问。比如 32 位的 CPU ，字长为 4 字节，那么 CPU 访问内存的单位也是 4 字节。

* CPU 始终以字长访问内存，如果不进行内存对齐，很可能增加 CPU 访问内存的次数

*变量 a、b 各占据 3 字节的空间，内存对齐后，a、b 占据 4 字节空间，CPU 读取 b 变量的值只需要进行一次内存访问。如果不进行内存对齐，CPU 读取 b 变量的值需要进行 2 次内存访问。第一次访问得到 b 变量的第 1 个字节，第二次访问得到 b 变量的后两个字节。*

简言之：**合理的内存对齐可以提高内存读写的性能，并且便于实现变量操作的原子性。**